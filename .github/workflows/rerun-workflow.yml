name: Re-run Workflow

on:
  workflow_run:
    workflows:
      - CI
    types:
      - completed
  pull_request_target:
    types:
      - labeled
      - unlabeled
  schedule:
    - cron: '*/10 * * * *'

jobs:
  rerun-workflow:
    runs-on: ubuntu-latest
    steps:
      - name: Re-run CI workflow
        uses: reitermarkus/rerun-workflow@8b554b23fd731eac62c7d8d392a0f262b7400b35
        with:
          token: ${{ secrets.HOMEBREW_GITHUB_API_TOKEN }}
          once-label: ci-requeue
          continuous-label: ci-retry
          trigger-labels: ci-skip-appcast,ci-skip-install,ci-syntax-only
          workflow: ci.yml
