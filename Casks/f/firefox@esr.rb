cask "firefox@esr" do
  version "128.5.2"

  language "af" do
    sha256 "9d0bdda6d997496227613156353bc381494d8ef18a3746144e8cae2031c2dc4f"
    "af"
  end
  language "ar" do
    sha256 "2849bf1247cbb916481dfd7f7725276da924551b7ec9b04b2cb89d9d0a3475ee"
    "ar"
  end
  language "be" do
    sha256 "58f349c44a6ec1b5095198f23455df352005d8cdd4c3d339d44245314b044f92"
    "be"
  end
  language "bg" do
    sha256 "ff37510e1cefb402312a7a0128d816734058ee0d53d29f6a801a225e02f50426"
    "bg"
  end
  language "bn" do
    sha256 "c874f74accdeb221df8bbc088b45aa32a8db51519167662c72cffd92d35b87bb"
    "bn"
  end
  language "ca" do
    sha256 "a47338bf94e41edc28166ed1ca7b960b4bbe479c31a583f5f5f0816921f97723"
    "ca"
  end
  language "cs" do
    sha256 "58602a82ba55cf88793791e1fbcaa8cdf9d66f965d5d492ac7ee810db8227a79"
    "cs"
  end
  language "de" do
    sha256 "53b2a6637c8e302d6db4d3c9dd19c4e7b66a41fb8709a7d902693eb24c06a976"
    "de"
  end
  language "en-CA" do
    sha256 "7b6ed15326630b5b39da92bef61efb76ad579b345225f4750bd476260feba4b2"
    "en-CA"
  end
  language "en-GB" do
    sha256 "624f1bcbbed890d268c224d50898f422341d34d6980b49df1de6f22842a0e41d"
    "en-GB"
  end
  language "en", default: true do
    sha256 "80c1b9a8f7d183d44a991f255212a3b7685a7216127995edfd9ab4c7ebefd641"
    "en-US"
  end
  language "eo" do
    sha256 "beb1763c11060104884c74f30e55718ceee1b2c89974bcb3315f0538ffb40aae"
    "eo"
  end
  language "es-AR" do
    sha256 "04826e479eac72cccfa44476a4b8b22427b7c05793ea3cc98d84154fd2216c30"
    "es-AR"
  end
  language "es-CL" do
    sha256 "2578f599d1f49a95699c525e159ce6c0699377a5ae84abeadf276d48eb0bb597"
    "es-CL"
  end
  language "es-ES" do
    sha256 "db1f0993f72362011fc50a0d06a69e9190a2c82fbf8697e4382403aa69e438c4"
    "es-ES"
  end
  language "fa" do
    sha256 "a43501681e4ea5b93f9f186fe9def08d64db973cc4b96b384256a6e87e02a8ae"
    "fa"
  end
  language "ff" do
    sha256 "78e55817aa56202e2e4ee75eca0f1f9d8dadd6d544fcd6b1528b35128cfd485b"
    "ff"
  end
  language "fi" do
    sha256 "54d67105dcc81542c05eda6810b88b0e54541c8b20ad8cf35f948f1d3762abc8"
    "fi"
  end
  language "fr" do
    sha256 "f5946e8feae1a4253cae96dc2340c999ae55b6d3d44f00de7ae5ec86fb514b6c"
    "fr"
  end
  language "gl" do
    sha256 "90b808d2b5d19128337033992eb4ef458ea898124bf16b38c4e96861c8bbca57"
    "gl"
  end
  language "gn" do
    sha256 "01feded0f1ba22a26b4b9482497795c3566ba0bf5a87f6e3b8a1dfcec8c1033d"
    "gn"
  end
  language "gu" do
    sha256 "069eaace5705db48ac97f142a1835be01fc173a5c2173b3176cfd242b84d0deb"
    "gu-IN"
  end
  language "he" do
    sha256 "88442bddab5d566442f8e46f450eb58f4f851241c4201454388ea5a5c84cfa37"
    "he"
  end
  language "hi" do
    sha256 "a366e18d3e55e8bd8fc015679d2f3d7688b38fbcccafdb07a0298a75b51d8fcb"
    "hi-IN"
  end
  language "in" do
    sha256 "a366e18d3e55e8bd8fc015679d2f3d7688b38fbcccafdb07a0298a75b51d8fcb"
    "hi-IN"
  end
  language "it" do
    sha256 "c86469288ebf1fe25a37bf3047e08d54761e6bc74e970ee7b83199fd98166eb6"
    "it"
  end
  language "ja" do
    sha256 "257c4e9885c0c67a10577cce8f341524920bef10dd78493c3f39e3b3d8a5217e"
    "ja-JP-mac"
  end
  language "ka" do
    sha256 "4e983bf4628ce9f837a8cbf4c1437e202abcb39aa20c3746f6c6bdbd5e434984"
    "ka"
  end
  language "ko" do
    sha256 "47de666b1bf5573adf4d49b2e73b222259c9d6cf97b8f025220a4342a216b627"
    "ko"
  end
  language "mr" do
    sha256 "4847fa17f482bfdacc1f2945e43fe5edc9937faafb1883c71dd8b39df52a7a5e"
    "mr"
  end
  language "my" do
    sha256 "817dc2f552fb2107bbcbc790db5a499e217ad36e46a709bd722d1bc4c641e82a"
    "my"
  end
  language "ne" do
    sha256 "fd1bd301764b31b16af282e6771df7dd95efb5ba11e5937f709e5cad970c7f97"
    "ne-NP"
  end
  language "nl" do
    sha256 "da74a2d5372e49e987658fd6752e704b12a5a9b6d02837e272d7bbe657435f91"
    "nl"
  end
  language "pa-IN" do
    sha256 "bf2ed14c7ab646a957550d7f3080495197a11bdee22a1d2407fbcfd3226119ef"
    "pa-IN"
  end
  language "pl" do
    sha256 "91f98063bb41da158fd19926ca40e23239bc101de33ede9c3a0511f4f0837dec"
    "pl"
  end
  language "pt-BR" do
    sha256 "a07b138187984f7f37955d309aade423047c46f10719361fee0b3584f9f4ad13"
    "pt-BR"
  end
  language "pt" do
    sha256 "1bd9fdbc6d8f579d46df9fbfa6d7d6303a9275bed0d107581f359eacc6613dd0"
    "pt-PT"
  end
  language "ru" do
    sha256 "f23d1eba32e64060f9efd4077e78b90d6cbf7f7274cb39270a498a3b0d4592b7"
    "ru"
  end
  language "si" do
    sha256 "0049c497fe26f881c787a0127b86163c8dacc682baa61bb493c3be31efbb7c4f"
    "si"
  end
  language "sq" do
    sha256 "60927b7ffd75781e31db325795d04df2f34a2840b195f7b57f14a79415878766"
    "sq"
  end
  language "sr" do
    sha256 "f7f1cfb01d5fd5477ecc85c8e7a84f4aa32476a8537b57fc182b189cc5435c1c"
    "sr"
  end
  language "sv" do
    sha256 "ef79f7621120b4323eb8afa302a90e9cd367e28da3db81d20712751caa7d23b7"
    "sv-SE"
  end
  language "ta" do
    sha256 "5ee1c4a1ef5e78e01abf2daaa68b281268cf166571fa5c39d294800b45c08d76"
    "ta"
  end
  language "te" do
    sha256 "3609df13d392857c54e834ee64e5443ce1e55d12dbdeba6c432be653265b2fb9"
    "te"
  end
  language "th" do
    sha256 "e39d5f48c6ce2050300c4ea703d35fa0af3820f49b50425142db804f215b384a"
    "th"
  end
  language "tl" do
    sha256 "bd9d765f5d0741320c4ca216d87930ce6d758b3a0b81b64ce5c5f89ab72fa695"
    "tl"
  end
  language "tr" do
    sha256 "d25c7d25a587d1f93b2ec763435183096a5f3e63667810161e6bd2deff005bb3"
    "tr"
  end
  language "uk" do
    sha256 "0f12e2b0a742a95e92ddbb05b6619a9eaf738ea84efaeff65585e2a79965a4ea"
    "uk"
  end
  language "ur" do
    sha256 "9c94cb70ba377f7f27b335a487049fcb11d3978497ae27ce2dfcd404ceb19ab8"
    "ur"
  end
  language "zh-TW" do
    sha256 "9bb42b65762d3dc30e0c4a18ae33a2bfdd6155a19afce8396e89902f612eca99"
    "zh-TW"
  end
  language "zh" do
    sha256 "3adc2f941583f7dde7fa5f2954a95324f7bb71fdefb44f89c4962086d5befa1e"
    "zh-CN"
  end

  url "https://download-installer.cdn.mozilla.net/pub/firefox/releases/#{version}esr/mac/#{language}/Firefox%20#{version}esr.dmg",
      verified: "download-installer.cdn.mozilla.net/pub/firefox/releases/"
  name "Mozilla Firefox ESR"
  name "Mozilla Firefox Extended Support Release"
  desc "Web browser"
  homepage "https://www.mozilla.org/en-US/firefox/all/#product-desktop-esr"

  livecheck do
    url "https://product-details.mozilla.org/1.0/firefox_versions.json"
    regex(/v?(\d+(?:\.\d+)+)/i)
    strategy :json do |json, regex|
      match = json["FIREFOX_ESR"]&.match(regex)
      next if match.blank?

      match[1]
    end
  end

  auto_updates true
  conflicts_with cask: [
    "firefox",
    "firefox@beta",
    "firefox@cn",
  ]
  depends_on macos: ">= :catalina"

  app "Firefox.app"

  uninstall quit:   "org.mozilla.firefox",
            delete: "/Library/Logs/DiagnosticReports/firefox_*"

  zap trash: [
        "~/Library/Application Support/com.apple.sharedfilelist/com.apple.LSSharedFileList.ApplicationRecentDocuments/org.mozilla.firefox.sfl*",
        "~/Library/Application Support/CrashReporter/firefox_*",
        "~/Library/Application Support/Firefox",
        "~/Library/Caches/Firefox",
        "~/Library/Caches/Mozilla/updates/Applications/Firefox",
        "~/Library/Caches/org.mozilla.crashreporter",
        "~/Library/Caches/org.mozilla.firefox",
        "~/Library/Preferences/org.mozilla.crashreporter.plist",
        "~/Library/Preferences/org.mozilla.firefox.plist",
        "~/Library/Saved Application State/org.mozilla.firefox.savedState",
        "~/Library/WebKit/org.mozilla.firefox",
      ],
      rmdir: [
        "~/Library/Application Support/Mozilla", #  May also contain non-Firefox data
        "~/Library/Caches/Mozilla",
        "~/Library/Caches/Mozilla/updates",
        "~/Library/Caches/Mozilla/updates/Applications",
      ]
end
